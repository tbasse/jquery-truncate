(function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e,t,r,i,s,o,u,a,f){var l=function(e){return(a?u:"")+e+(a?"":u)};var c,h,p;if(a){c=i===0?"":r.slice(-i);h=r.slice(-s)}else{c=r.slice(0,i);h=r.slice(0,s)}if(t<o[f](u)[e]()){return 0}if(o[f](l(h))[e]()<o[f](l(c))[e]()){return s}p=parseInt((i+s)/2,10);c=a?r.slice(-p):r.slice(0,p);o[f](l(c));if(o[e]()===t){return p}if(o[e]()>t){s=p-1}else{i=p+1}return n(e,t,r,i,s,o,u,a,f)}e.fn.truncate=function(r){if(!r){r={}}if(typeof r.center!="undefined"&&typeof r.side=="undefined"){r.side="center";delete r.center}if(typeof r.side!="undefined")switch(r.side){case"left":case"center":case"right":break;default:delete r.side}var i={width:"auto",token:"â€¦",side:"right",addclass:false,addtitle:false,multiline:false};r=e.extend(i,r);return this.each(function(){var i=e(this),s={fontFamily:i.css("fontFamily"),fontSize:i.css("fontSize"),fontStyle:i.css("fontStyle"),fontWeight:i.css("fontWeight"),"font-variant":i.css("font-variant"),"text-indent":i.css("text-indent"),"text-transform":i.css("text-transform"),"letter-spacing":i.css("letter-spacing"),"word-spacing":i.css("word-spacing"),display:"none",escapeHTML:false},o=i.text(),u=r.escapeHTML?"text":"html",a=e("<span/>").css(s)[u](o).appendTo("body"),f=a.width(),l=t(r.width)?r.width:i.width(),c="width",h,p,d;if(r.multiline){a.width(i.width());c="height";p=a.height();d=i.height()+1}else{p=f;d=l}if(p>d){a.text("");switch(r.side){case"left":h=r.token+o.slice(-1*n(c,d,o,0,o.length,a,r.token,true,u));break;case"center":d=parseInt(d/2,10)-1;h=o.slice(0,n(c,d,o,0,o.length,a,r.token,false,u))+r.token+o.slice(-1*n(c,d,o,0,o.length,a,"",true,u));break;case"right":h=o.slice(0,n(c,d,o,0,o.length,a,r.token,false,u))+r.token;break}if(r.addclass){i.addClass(r.addclass)}if(r.addtitle){i.attr("title",o)}if(r.escapeHTML){i.text(h)}else{i.empty().append(h)}}a.remove()})}})(jQuery)